---
title: 7. ì˜¤ë¥˜ ì²˜ë¦¬
draft: false
tags:
---
> [!NOTE]
> ì•„ëŠ”ë§Œí¼ ë³´ì¸ë‹¤...ğŸ˜­

ì˜¤ë¥˜ ì²˜ë¦¬ëŠ” í”„ë¡œê·¸ë¨ì— ë°˜ë“œì‹œ í•„ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì´ë‹¤.
ì½”ë“œì—ì„œ ë­”ê°€ ì˜ëª»ëœ ê²ƒì´ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ë°”ë¡œ ì¡ì„ ì±…ì„ì€ ë°”ë¡œ ìš°ë¦¬ í”„ë¡œê·¸ë˜ë¨¸ì—ê²Œ ìˆë‹¤.
í•˜ì§€ë§Œ ì˜¤ë¥˜ ì²˜ë¦¬ ì½”ë“œë¡œ ì¸í•´ í”„ë¡œê·¸ë¨ ë…¼ë¦¬ë¥¼ ì´í•´í•˜ê¸° ì–´ë ¤ì›Œì§„ë‹¤ë©´ ê¹¨ë—í•œ ì½”ë“œë¼ ë¶€ë¥´ê¸° ì–´ë µë‹¤.

## ì˜¤ë¥˜ ì½”ë“œë³´ë‹¤ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë¼
- ê³¼ê±°ì—ëŠ” ì˜ˆì™¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ê°€ ë§ì•˜ê³ , ì˜¤ë¥˜ í”Œë˜ê·¸ë¥¼ ì„¤ì •í•˜ê±°ë‚˜ ì˜¤ë¥˜ ì½”ë“œë¥¼ ë°˜í™˜í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í–ˆë‹¤.
	- ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ í˜¸ì¶œì ì½”ë“œê°€ ë³µì¡í•´ì§„ë‹¤.
```java
public class DeviceController { ...

public void sendShutDown() { 
	DeviceHandle handle = getHandle(DEV1); 
	// Check the state of the device  
	if (handle != DeviceHandle.INVALID) {
	
		// Save the device status to the record field 
		retrieveDeviceRecord(handle);
		
		// If not suspended, shut down  
		if (record.getStatus() != DEVICE_SUSPENDED) {

			pauseDevice(handle); 
			clearDeviceWorkQueue(handle); 
			closeDevice(handle);

		} else {  
			logger.log("Device suspended. Unable to shut down");

		}  
	} else {
		logger.log("Invalid handle for: " + DEV1.toString()); }
	}

	... 
}
```
- ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ í˜¸ì¶œì ì½”ë“œê°€ ë” ê¹”ë”í•´ì§„ë‹¤.
```java
public class DeviceController { 
	...

	public void sendShutDown() { 
		try {
			tryToShutDown();  
		} catch (DeviceShutDownError e) {
			logger.log(e); 
		}
	}
	private void tryToShutDown() throws DeviceShutDownError { 
		DeviceHandle handle = getHandle(DEV1);  
		DeviceRecord record = retrieveDeviceRecord(handle);

		pauseDevice(handle); 
		clearDeviceWorkQueue(handle); 
		closeDevice(handle);
	}

	private DeviceHandle getHandle(DeviceID id) { 
		...
		throw new DeviceShutDownError("Invalid handle for: " + id.toString());
		... 
	}	
	... 
}
```
## Try-Catch-Finally ë¬¸ë¶€í„° ì‘ì„±í•˜ë¼
- try ë¸”ë¡ì— ë“¤ì–´ê°€ëŠ” ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ì–´ëŠ ì‹œì ì—ì„œë“  ì‹¤í–‰ì´ ì¤‘ë‹¨ëœ í›„ catch ë¸”ë¡ìœ¼ë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆë‹¤.
- try ë¸”ë¡ì€ íŠ¸ëœì ì…˜ê³¼ ë¹„ìŠ·í•˜ë‹¤. try ë¸”ë¡ì—ì„œ ë¬´ìŠ¨ ì¼ì´ ìƒê¸°ë“ ì§€ catch ë¸”ë¡ì€ í”„ë¡œê·¸ë¨ ìƒíƒœë¥¼ ì¼ê´€ì„± ìˆê²Œ ìœ ì§€í•´ì•¼ í•œë‹¤.

## ë¯¸í™•ì¸ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë¼
- í™•ì¸ëœ ì˜ˆì™¸ëŠ” OCP(Open Closed Principle)ë¥¼ ìœ„ë°˜í•œë‹¤.

> [!NOTE]
> checked exception : ì˜ëª»ëœ ì½”ë“œê°€ ì•„ë‹Œ ì˜ëª»ëœ ìƒí™©ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸, ì˜ˆì™¸ì²˜ë¦¬ê°€ ì—†ì„ ê²½ìš° ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒ - catch ë˜ëŠ” throws ë¡œ ì²˜ë¦¬ë¥¼ ë°˜ë“œì‹œ í•´ì•¼í•œë‹¤.
> unchecked exception : RuntimeException, ì˜ëª» êµ¬í˜„ëœ ì½”ë“œë¡œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸

-> ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ê°•ì œí•˜ì§€ ë§ë¼ëŠ” ê²ƒì¸ê°€?

- í•˜ìœ„ ë‹¨ê³„ì—ì„œ ì½”ë“œë¥¼ ë³€ê²½í•˜ë©´ ìƒìœ„ ë‹¨ê³„ ë©”ì„œë“œ ì„ ì–¸ë¶€ë¥¼ ì „ë¶€ ê³ ì³ì•¼í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
- 
```java
 public void printA(bool flag) {
     if(flag)
         System.out.println("called");
 }

 public void func(bool flag) {
     printA(flag);
 }
 ```
 
```java
 public void printA(bool flag) throws NotPrintException {
     if(flag)
         System.out.println("called");
     else
         throw new NotPrintException();
 }

 public void func(bool flag) throws NotPrintException {
     printA(flag);
 }
 ```
## ì˜ˆì™¸ì— ì˜ë¯¸ë¥¼ ì œê³µí•˜ë¼
- ì˜ˆì™¸ë¥¼ ë˜ì§ˆ ë•ŒëŠ” ì „í›„ ìƒí™©ì„ ì¶©ë¶„íˆ ë§ë¶™ì¸ë‹¤.
	- í˜¸ì¶œ ìŠ¤íƒ ë¿ë§Œì•„ë‹ˆë¼ ì‹¤íŒ¨í•œ ì—°ì‚° ì´ë¦„ê³¼ ì‹¤íŒ¨ ìœ í˜•ë„ ì–¸ê¸‰í•œë‹¤.
	- ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¡œê¹… ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤ë©´ catch ë¸”ë¡ì—ì„œ ì˜¤ë¥˜ë¥¼ ê¸°ë¡í•˜ë„ë¡ ì¶©ë¶„í•œ ì •ë³´ë¥¼ ë„˜ê²¨ì¤€ë‹¤.

## í˜¸ì¶œìë¥¼ ê³ ë ¤í•´ ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ë¼
- ì™¸ë¶€ API ì™€ Exception ìœ í˜•ì„ wrapping(ê°ì‹¸ê¸° ê¸°ë²•) ì„ ì´ìš©í•´ì„œ ì˜ì¡´ì„±ì„ ì¤„ì¸ë‹¤. 

## ì •ìƒ íë¦„ì„ ì •ì˜í•˜ë¼
- ì•ì ˆì˜ ì§€ì¹¨ì„ ì¶©ì‹¤íˆ ì´í–‰í•˜ë©´ ë¹„ì¦ˆë‹ˆìŠ¤ ë…¼ë¦¬ì™€ ì˜¤ë¥˜ì²˜ë¦¬ê°€ ì˜ ë¶„ë¦¬ëœ ì½”ë“œê°€ ë‚˜ì˜¨ë‹¤.
- ì •ìƒ ë¡œì§ì„ ë¶ˆí•„ìš”í•œ Exception ìœ¼ë¡œ ì •ì˜í•˜ì§€ ë§ˆë¼.
	- ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ì–´ë µê³ , ë¶ˆí•„ìš”í•˜ë‹¤.

## nullì„ ë°˜í™˜í•˜ì§€ ë§ˆë¼
- null ì„ ë°˜í™˜í•˜ëŠ” ì½”ë“œëŠ” ì¼ê±°ë¦¬ë¥¼ ëŠ˜ë¦´ ë¿ë§Œ ì•„ë‹ˆë¼ í˜¸ì¶œìì—ê²Œ ë¬¸ì œë¥¼ ë– ë„˜ê¸´ë‹¤.
- ëˆ„êµ¬ í•˜ë‚˜ë¼ë„ null í™•ì¸ì„ ë¹¼ë¨¹ëŠ”ë‹¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í†µì œ ë¶ˆëŠ¥ì— ë¹ ì§ˆì§€ë„ ëª¨ë¥¸ë‹¤.
- null ì„ ë°˜í™˜í•˜ê³ í”ˆ ìœ í˜¹ì´ ë“ ë‹¤ë©´ ì˜ˆì™¸ë¥¼ ë˜ì§€ê±°ë‚˜ íŠ¹ìˆ˜ì‚¬ë¡€ ê°ì²´ë¥¼ ë°˜í™˜í•˜ë¼.

## nullì„ ì „ë‹¬í•˜ì§€ ë§ˆë¼
- ë©”ì„œë“œë¡œ null ì„ ì „ë‹¬í•˜ëŠ” ë°©ì‹ì€ ë” ë‚˜ì˜ë‹¤.
- ì •ìƒì ì¸ ì¸ìˆ˜ë¡œ null ì„ ê¸°ëŒ€í•˜ëŠ” api ê°€ ì•„ë‹ˆë¼ë©´ ë©”ì„œë“œë¡œ null ì„ ì „ë‹¬í•˜ëŠ” ì½”ë“œëŠ” ìµœëŒ€í•œ í”¼í•œë‹¤.
- ê·¸ë ‡ë‹¤ë©´ request ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ê°’ì€ ì–´ë–»ê²Œ í•¸ë“¤ë§ í•´ì•¼í• ê¹Œ? notNull ì–´ë…¸í…Œì´ì…˜ì„ ì“°ê³  ìµì…‰ì…˜ í•¸ë“¤ë§?


## ë¦¬íŒ©í† ë§
### ì›ë³¸ ì½”ë“œ

```java
@Override  
protected void processSyncData(KcaNewsResult result) {  
  
    for (KcaNewsResult.KcaNews kcaNews : result.getData()) {  
  
        // íŒŒì¼ ìƒì„±  
        FileMasterDto.SimpleDto fileMaster = createFileMaster(kcaNews);  
        if (fileMaster == null) {  
            log.error(kcaNews.toString());  
            log.error("Find or Create FileMaster failed. skip");  
            continue;  
        }  
  
        KcaNewsResult.KcaNewsConverter kcaNewsConverter = new KcaNewsResult.KcaNewsConverter(kcaNews, fileMaster);  
  
        // parentCategoryDto ê²€ìƒ‰  
        CategoryDto parentCategoryDto = findCategoryDto(kcaNewsConverter);  
  
        KcaFaqPersistDtoConverterBase.ConvertEntity convertEntity = kcaNewsConverter.convert(parentCategoryDto);  
  
        if (convertEntity.isValid()) {  
            kcaFaqService.createOrUpdateKcaFaq(convertEntity.getKcaFaqPersistDto());  
        }  
    }  
}  
  
private FileMasterDto.SimpleDto createFileMaster(KcaNewsResult.KcaNews kcaNews) {  
    KcaSharedFileMasterPersistDto persistDto = KcaSharedFileMasterPersistDto.builder()  
            .fileName(kcaNews.getFileName())  
            .directory(kcaNews.getFilePath())  
            .savedName(kcaNews.getFileSname())  
            .fileType(FileType.DOCUMENT)  
            .build();  
  
        try {  
            return kcaSharedFileManagerService.createFileMaster(persistDto);  
        } catch (Exception e) {  
            e.printStackTrace();  
        }  
        return null;  
}
```
#### ë¬¸ì œì 
- createFileMaster ë©”ì†Œë“œê°€ null ì„ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.
- createFileMaster ë©”ì†Œë“œì—ì„œ ì˜¤ë¥˜ë¥¼ í˜•í¸ì—†ì´ ë¶„ë¥˜í–ˆë‹¤. (Exception ì„ ìƒì†ë°›ëŠ” ëª¨ë“  ì˜¤ë¥˜ëŠ” ë™ì¼í•˜ê²Œ ì²˜ë¦¬í•˜ë„ë¡) -> ì‚¬ì‹¤ ì–´ë–¤ ì‚¬ìœ ì—ì„œë“  ë©”ì„œë“œê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë’· ì‘ì—…ì„ ìŠ¤í‚µí•˜ê²Œ í•˜ê¸° ìœ„í•œ ì˜ë„ì˜€ë‹¤.
- ì˜ˆì™¸ì— ì˜ë¯¸ë¥¼ ì œê³µí•˜ì§€ ì•Šì•˜ë‹¤. (ì‚¬ì‹¤ ë’· ë¡œì§ì— ì˜ˆì™¸ë¡œê·¸ê°€ ë”°ë¡œ ì¡´ì¬í•¨)

### ìˆ˜ì •
```java
@Override  
protected void processSyncData(KcaNewsResult result) {  
  
    for (KcaNewsResult.KcaNews kcaNews : result.getData()) {  
  
        // íŒŒì¼ ìƒì„±  
        FileMasterSimpleDtoWrapper wrapper = createFileMaster(kcaNews);  
        if (!wrapper.isValid) {  
            continue;  
        }  
  
        KcaNewsResult.KcaNewsConverter kcaNewsConverter = new KcaNewsResult.KcaNewsConverter(kcaNews, wrapper.getDto());  
  
        // parentCategoryDto ê²€ìƒ‰  
        CategoryDto parentCategoryDto = findCategoryDto(kcaNewsConverter);  
  
        KcaFaqPersistDtoConverterBase.ConvertEntity convertEntity = kcaNewsConverter.convert(parentCategoryDto);  
  
        if (convertEntity.isValid()) {  
            kcaFaqService.createOrUpdateKcaFaq(convertEntity.getKcaFaqPersistDto());  
        }  
    }  
}  
  
private FileMasterSimpleDtoWrapper createFileMaster(KcaNewsResult.KcaNews kcaNews) {  
    KcaSharedFileMasterPersistDto persistDto = KcaSharedFileMasterPersistDto.builder()  
            .fileName(kcaNews.getFileName())  
            .directory(kcaNews.getFilePath())  
            .savedName(kcaNews.getFileSname())  
            .fileType(FileType.DOCUMENT)  
            .build();  
    boolean isValid = true;  
        FileMasterDto.SimpleDto fileMaster = null;  
        try {  
             fileMaster= kcaSharedFileManagerService.createFileMaster(persistDto);  
        } catch (Exception e) {  
            log.error(kcaNews.toString());  
            log.error("Find or Create FileMaster failed. skip");  
            e.printStackTrace();  
            isValid = false;  
        }  
        return new FileMasterSimpleDtoWrapper(isValid, fileMaster);  
}

@AllArgsConstructor  
@Getter  
public static class FileMasterSimpleDtoWrapper {  
    private boolean isValid;  
    private FileMasterDto.SimpleDto dto;  
}
```

#### ë³€ê²½ì 
- dto ì™€ isvalid ë¥¼ ê°ì‹¸ëŠ” wrapper ë¥¼ ìƒì„±í•´ì„œ null ë°œìƒ ê°€ëŠ¥ì„±ì„ ë‚®ì¶”ì—ˆë‹¤.
- catch ì ˆì—ì„œ ì—ëŸ¬ë¥¼ ì¢€ ë” ë””í…Œì¼í•˜ê²Œ ë³€ê²½í–ˆë‹¤.
- ì˜¤ë¥˜ë¥¼ í˜•í¸ì—†ì´ ë¶„ë¥˜í•œê±´ ì˜ë„ìƒ ê·¸ëŒ€ë¡œ ë‘ì–´ë²„ë ¸ë‹¤.

### ì£¼ì ˆì£¼ì ˆ
web api í”„ë¡œì íŠ¸ì—ì„œ null ì´ë‚˜ empty ë¥¼ ê²€ì‚¬í•˜ëŠ” ë¡œì§ì„ ì „í˜€ ì•ˆì“°ê¸°ëŠ” ì–´ë ¤ìš¸ ê²ƒ ê°™ë‹¤. (ì‚¬ìš©ìê°€ null ê°’ì„ ì „ë‹¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—)


https://amazingguni.github.io/blog/2016/05/Clean-Code-7-%EC%98%A4%EB%A5%98-%EC%B2%98%EB%A6%AC
https://velog.io/@lychee/Clean-Code-7%EC%9E%A5-%EC%98%A4%EB%A5%98-%EC%B2%98%EB%A6%AC